services:
  - type: web
    name: selfupgrade-backend
    env: docker
    plan: free
    repo: "<REPO_URL>" # replace with your GitHub repo URL when connecting on Render
    branch: main
    dockerfilePath: Dockerfile
    buildCommand: ""
    envVars:
      - key: DATABASE_URL
        value: "{{DATABASE_URL}}" # Render secret - set via Render dashboard
      - key: AUTH0_DOMAIN
        value: "{{AUTH0_DOMAIN}}"
      - key: AUTH0_AUDIENCE
        value: "{{AUTH0_AUDIENCE}}"
      - key: AUTH0_CLIENT_ID
        value: "{{AUTH0_CLIENT_ID}}"
      - key: FRONTEND_ORIGIN
        value: "{{FRONTEND_ORIGIN}}"
      - key: ENCRYPTION_KEY
        sync: false  
    healthCheckPath: /.well-known/health
    instances: 1
    plan: free
